---
title: 瞎聊 - 程序开发中的回收
date: 2024-5-22 06:28:43 +0800
tags: [gossip]
---

如何设计回收？

回收的基础是你创建了一个程序对象，这个对象占用了一定的程序资源。
当这个对象使用完成以后，你需要解除它占用的程序资源。

在基于任意工具的二次开发工作中，这些工具提供了对象本身的创建和删除API。
在这种情况下，如果创建了这个对象以后，你为它添加了额外的功能模块，那你就需要在这个对象被删除的时候，一并删除额外的这些功能模块。

所有的回收逻辑都是基于此建立起来的。

如果回收设计出现难点，往往是回收流程逻辑的设计缺陷。
如果程序流程设计不清晰，在后期运行中就会遗忘某些东西有没有成功被回收，自然就会导致回收失败。

回收有没有成功？
回收的时间点有没有设计清晰？
所有的组件有没有遗漏？

这些工作的关键在于及时和仔细，容不得疏忽。
前期的每一个疏忽会变成后期的孔洞，这是程序开发的难点。
